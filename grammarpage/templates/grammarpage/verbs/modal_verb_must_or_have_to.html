{% extends 'grammarpage/grammar_base.html' %}
{% load static %}
{% load i18n %}

{% block grammar_title %}{% translate "Must / Have to" %}{% endblock %}

{% block extra_css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'style/grammar_list.css' %}">
    <style>
        .main-container {
            padding-top: 40px;
        }

        .grammar-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            color: #e0e0e0;
        }

        h3, h4 {
            color: #ff9e7d;
            border-bottom: 2px solid #444;
            padding-bottom: 5px;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        h3 {
            font-size: 24px;
        }

        h4 {
            font-size: 20px;
            margin-top: 25px;
        }

        h5 {
            font-size: 18px;
            color: #83e8de;
            margin-top: 15px;
            margin-bottom: 10px;
        }

        p {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .grammar-divider {
            border: 1px solid #444;
            margin: 20px 0;
        }

        .styled-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .styled-list li {
            margin: 8px 0;
            position: relative;
            padding-left: 25px;
        }

        .styled-list li:before {
            content: "•";
            color: #4cc9f0;
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 0;
        }

        .styled-list .styled-list li:before {
            content: "-";
        }
        
        .styled-list .styled-list .styled-list li:before {
            content: "•";
        }

        .styled-list li ul.styled-list {
            margin-top: 5px;
        }

        .styled-list li ul.styled-list li {
            padding-left: 15px;
            margin: 4px 0;
        }

        .term-highlight, .pronoun-highlight {
            color: #ff9e7d;
            font-weight: 600;
        }
        
        .auxiliary-highlight {
            color: #83e8de;
            font-weight: 600;
        }

        .verb-highlight {
            color: #ffda47;
            font-weight: 600;
        }

        .code-highlight {
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.2);
            display: inline-block;
            margin: 5px 0;
            padding: 2px 4px;
            border-radius: 4px;
            color: #83e8de;
            white-space: nowrap;
        }

        .example-highlight {
            color: #4cc9f0;
            font-weight: 500;
        }

        .grammar-table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        .grammar-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0, 0, 0, 0.1);
        }

        .grammar-table th, .grammar-table td {
            border: 1px solid #444;
            padding: 10px;
            text-align: left;
        }

        .grammar-table th {
            background: rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }

        .back-to-list-btn {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 20px;
            background-color: #4cc9f0;
            color: #1e1e1e;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .back-to-list-btn:hover {
            background-color: #ff9e7d;
        }
        
        @media (max-width: 600px) {
            .grammar-detail-container {
                padding: 10px;
            }
        }
    </style>
{% endblock %}

{% block grammar_content %}
    <div class="grammar-detail-container">
        <nav class="breadcrumbs">
            <a href="{% url 'home' %}">{% translate "Home" %}</a> &raquo;
            <span><a href="{% url 'grammar_page' %}">{% translate "Grammar" %}</a></span> &raquo;
            <span><a href="{% url 'verbs_page' %}">{% translate "Verbs" %}</a></span> &raquo;
            <span>{% translate "Must / Have to" %}</span>
        </nav>
        
        <h1>{% translate "Must / Have to" %}</h1>
        <p>
            {% translate "<span class=\"term-highlight\">Must</span> and <span class=\"term-highlight\">Have to</span> both express obligation or necessity, but they carry slightly different nuances regarding the source of the obligation. \"Must\" often implies an internal obligation or strong recommendation from the speaker, while \"have to\" typically refers to an external obligation, rule, or circumstance." %}
        </p>

        <hr class="grammar-divider">

        <h4>{% translate "Forms of Must / Have to" %}</h4>
        <p>
            {% translate "As a modal verb, \"must\" does not change form. \"Have to\", however, conjugates like a regular verb, using \"have,\" \"has,\" \"had,\" etc., depending on the tense and subject." %}
        </p>

        <h5>{% translate "1. Must (Present / Future Obligation or Deduction)" %}</h5>
        <p>
            {% translate "\"Must\" is a modal verb, so it is followed by the base form of the main verb and does not change with the subject." %}
        </p>
        <div class="grammar-table-container">
            <table class="grammar-table">
                <thead>
                    <tr>
                        <th>{% translate "Form" %}</th>
                        <th>{% translate "Structure" %}</th>
                        <th>{% translate "Example" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="term-highlight">{% translate "Affirmative" %}</span></td>
                        <td>{% translate "Subject + must + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "You" %} <span class="auxiliary-highlight">{% translate "must finish" %}</span> {% translate "your homework." %}</span><br><span class="code-highlight">{% translate "He" %} <span class="auxiliary-highlight">{% translate "must be" %}</span> {% translate "tired." %}</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Negative" %}</span></td>
                        <td>{% translate "Subject + must not / mustn't + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "You" %} <span class="auxiliary-highlight">{% translate "must not smoke" %}</span> {% translate "here." %}</span><br><span class="code-highlight">{% translate "He" %} <span class="auxiliary-highlight">{% translate "mustn't be late" %}</span>.</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Interrogative" %}</span></td>
                        <td>{% translate "Must + Subject + Base Verb?" %} ({% translate "Rare, very formal" %})</td>
                        <td><span class="code-highlight"><span class="auxiliary-highlight">{% translate "Must I go" %}</span> {% translate "now?" %}</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h5>{% translate "2. Have to (All Tenses for Obligation)" %}</h5>
        <p>
            {% translate "\"Have to\" is not a modal verb itself, but acts like one in expressing obligation. It conjugates like a regular verb (\"have,\" \"has,\" \"had,\" \"will have,\" \"is having,\" etc.)" %}
        </p>
        <div class="grammar-table-container">
            <table class="grammar-table">
                <thead>
                    <tr>
                        <th>{% translate "Tense" %}</th>
                        <th>{% translate "Structure" %}</th>
                        <th>{% translate "Example" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="term-highlight">{% translate "Present Simple" %}</span></td>
                        <td>{% translate "Subject + have/has to + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "I" %} <span class="verb-highlight">{% translate "have to work" %}</span> {% translate "tomorrow." %}</span><br><span class="code-highlight">{% translate "She" %} <span class="verb-highlight">{% translate "has to leave" %}</span> {% translate "early." %}</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Past Simple" %}</span></td>
                        <td>{% translate "Subject + had to + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "We" %} <span class="verb-highlight">{% translate "had to cancel" %}</span> {% translate "the trip." %}</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Future Simple" %}</span></td>
                        <td>{% translate "Subject + will have to + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "They" %} <span class="verb-highlight">{% translate "will have to wait" %}</span>.</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Present Perfect" %}</span></td>
                        <td>{% translate "Subject + have/has had to + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "He" %} <span class="verb-highlight">{% translate "has had to borrow" %}</span> {% translate "money." %}</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Continuous Forms" %}</span></td>
                        <td>{% translate "Subject + form of \"to be\" + having to + Base Verb" %}</td>
                        <td><span class="code-highlight">{% translate "I'm" %} <span class="verb-highlight">{% translate "having to work" %}</span> {% translate "late this week." %}</span> ({% translate "Less common for obligation" %})</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h5>{% translate "3. Must have + Past Participle (Past Deduction)" %}</h5>
        <p>
            {% translate "Used to express a strong certainty or logical conclusion about a past event." %}
        </p>
        <div class="grammar-table-container">
            <table class="grammar-table">
                <thead>
                    <tr>
                        <th>{% translate "Form" %}</th>
                        <th>{% translate "Structure" %}</th>
                        <th>{% translate "Example" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="term-highlight">{% translate "Affirmative" %}</span></td>
                        <td>{% translate "Subject + must have + Past Participle" %}</td>
                        <td><span class="code-highlight">{% translate "He" %} <span class="auxiliary-highlight">{% translate "must have forgotten" %}</span> {% translate "his keys." %}</span><br><span class="code-highlight">{% translate "She" %} <span class="auxiliary-highlight">{% translate "must have left" %}</span> {% translate "already." %}</span></td>
                    </tr>
                    <tr>
                        <td><span class="term-highlight">{% translate "Negative" %}</span></td>
                        <td><span class="code-highlight">({% translate "Not used with 'must have' for past deduction; use 'can't have' or 'couldn't have'" %})</span></td>
                        <td><span class="code-highlight">{% translate "He" %} <span class="auxiliary-highlight">{% translate "can't have known" %}</span>.</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <hr class="grammar-divider">

        <h4>{% translate "Use of Must / Have to" %}</h4>
        <p>
            {% translate "While both \"must\" and \"have to\" express obligation, their subtle differences in meaning depend on the context and the source of the obligation." %}
        </p>

        <h5>{% translate "1. Expressing Obligation or Necessity" %}</h5>
        <ul class="styled-list">
            <li><span class="term-highlight">{% translate "Must (Internal Obligation / Speaker's Authority):" %}</span>
                {% translate "Used when the obligation comes from the speaker, or the speaker feels it is very important. It implies personal conviction or a strong recommendation." %}
                <ul class="styled-list">
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "I" %} <span class="verb-highlight">{% translate "must remember" %}</span> {% translate "to send that email." %}</span> ({% translate "Internal necessity/personal feeling" %})</li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "You" %} <span class="verb-highlight">{% translate "must clean" %}</span> {% translate "your room." %}</span> ({% translate "Speaker's command/strong advice" %})</li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "We" %} <span class="verb-highlight">{% translate "must protect" %}</span> {% translate "the environment." %}</span> ({% translate "Strong belief/necessity" %})</li>
                </ul>
            </li>
            <li><span class="term-highlight">{% translate "Have to (External Obligation / Rules / Circumstances):" %}</span>
                {% translate "Used when the obligation is imposed by external circumstances, rules, laws, or another authority." %}
                <ul class="styled-list">
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "I" %} <span class="verb-highlight">{% translate "have to work" %}</span> {% translate "tomorrow." %}</span> ({% translate "External requirement – my job demands it" %})</li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "Students" %} <span class="verb-highlight">{% translate "have to wear" %}</span> {% translate "uniforms." %}</span> ({% translate "School rule" %})</li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "We" %} <span class="verb-highlight">{% translate "had to leave" %}</span> {% translate "early because of the storm." %}</span> ({% translate "Circumstance" %})</li>
                </ul>
            </li>
        </ul>
        <p><span class="example-highlight">{% translate "Note:" %}</span> {% translate "In informal spoken English, \"have to\" is often preferred over \"must\" for general obligations, even internal ones." %}</p>

        <h5>{% translate "2. Expressing Prohibition (Must not / Mustn't)" %}</h5>
        <p>
            {% translate "\"Must not\" (or \"mustn't\") is used to state that something is forbidden or not allowed. It's a strong prohibition, usually coming from the speaker's authority or a strong moral/legal imperative." %}
        </p>
        <ul class="styled-list">
            <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "You" %} <span class="auxiliary-highlight">{% translate "must not smoke" %}</span> {% translate "in here." %}</span> ({% translate "Rule/Prohibition" %})</li>
            <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "You" %} <span class="auxiliary-highlight">{% translate "mustn't tell" %}</span> {% translate "anyone our secret." %}</span> ({% translate "Strong advice/prohibition from speaker" %})</li>
        </ul>

        <h5>{% translate "3. Expressing Absence of Obligation (Don't have to / Doesn't have to)" %}</h5>
        <p>
            {% translate "The negative form of \"have to\" expresses a lack of obligation or necessity. It means something is not required, but can be done if desired." %}
        </p>
        <ul class="styled-list">
            <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "You" %} <span class="verb-highlight">{% translate "don't have to come" %}</span> {% translate "if you don't want to." %}</span> ({% translate "It's not necessary" %})</li>
            <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "She" %} <span class="verb-highlight">{% translate "doesn't have to work" %}</span> {% translate "on Sundays." %}</span> ({% translate "It's not required for her" %})</li>
        </ul>
        <p><span class="example-highlight">{% translate "Note:" %}</span> {% translate "\"Mustn't\" and \"don't have to\" have completely different meanings. \"Mustn't\" = 'don't do it' (prohibition). \"Don't have to\" = 'it's not necessary to do it'." %}</p>

        <h5>{% translate "4. Expressing Logical Deduction / Strong Certainty" %}</h5>
        <ul class="styled-list">
            <li><span class="term-highlight">{% translate "Must (Present/Future Deduction):" %}</span> {% translate "Used when you are almost certain that something is true, based on evidence." %}
                <ul class="styled-list">
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "He's been working all day; he" %} <span class="auxiliary-highlight">{% translate "must be" %}</span> {% translate "tired." %}</span> ({% translate "Logical conclusion" %})</li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "That" %} <span class="auxiliary-highlight">{% translate "must be" %}</span> {% translate "the doorbell." %}</span></li>
                </ul>
            </li>
            <li><span class="term-highlight">{% translate "Must have + Past Participle (Past Deduction):" %}</span> {% translate "Used for strong conclusions about past events." %}
                <ul class="styled-list">
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "Her lights are off; she" %} <span class="auxiliary-highlight">{% translate "must have gone" %}</span> {% translate "to bed." %}</span></li>
                    <li><span class="example-highlight">{% translate "Example:" %}</span> <span class="code-highlight">{% translate "They" %} <span class="auxiliary-highlight">{% translate "must have left" %}</span> {% translate "by now." %}</span></li>
                </ul>
            </li>
        </ul>

        <div class="navigation-links">
            <a href="{% url 'verbs_page' %}" class="back-to-list-btn">
                <i class="fas fa-arrow-left"></i> {% translate "Back to Verbs" %}
            </a>
        </div>
    </div>
{% endblock %}